<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily New Month Celebration</title>
    <meta name="description" content="Daily wishes with changing themes, quotes, prayers, and location-based insights for each day of the month.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* [All previous CSS remains the same, just adding new styles] */
        
        /* Daily Theme Colors */
        .theme-day-1 { background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d); }
        .theme-day-2 { background: linear-gradient(135deg, #0f3460, #533483, #e94560); }
        .theme-day-3 { background: linear-gradient(135deg, #16213e, #0f3460, #533483); }
        .theme-day-4 { background: linear-gradient(135deg, #1e3c72, #2a5298, #5b8dc9); }
        .theme-day-5 { background: linear-gradient(135deg, #00416a, #799f0c, #ffe000); }
        .theme-day-6 { background: linear-gradient(135deg, #4a00e0, #8e2de2, #4a00e0); }
        .theme-day-7 { background: linear-gradient(135deg, #007991, #78ffd6, #007991); }
        .theme-day-8 { background: linear-gradient(135deg, #ff416c, #ff4b2b, #ff416c); }
        .theme-day-9 { background: linear-gradient(135deg, #11998e, #38ef7d, #11998e); }
        .theme-day-10 { background: linear-gradient(135deg, #4568dc, #b06ab3, #4568dc); }
        .theme-day-11 { background: linear-gradient(135deg, #3a1c71, #d76d77, #ffaf7b); }
        .theme-day-12 { background: linear-gradient(135deg, #141e30, #243b55, #141e30); }
        .theme-day-13 { background: linear-gradient(135deg, #f46b45, #eea849, #f46b45); }
        .theme-day-14 { background: linear-gradient(135deg, #834d9b, #d04ed6, #834d9b); }
        .theme-day-15 { background: linear-gradient(135deg, #5a3f37, #2c7744, #5a3f37); }
        .theme-day-16 { background: linear-gradient(135deg, #3494e6, #ec6ead, #3494e6); }
        .theme-day-17 { background: linear-gradient(135deg, #67b26f, #4ca2cd, #67b26f); }
        .theme-day-18 { background: linear-gradient(135deg, #f857a6, #ff5858, #f857a6); }
        .theme-day-19 { background: linear-gradient(135deg, #4b6cb7, #182848, #4b6cb7); }
        .theme-day-20 { background: linear-gradient(135deg, #f093fb, #f5576c, #f093fb); }
        .theme-day-21 { background: linear-gradient(135deg, #43cea2, #185a9d, #43cea2); }
        .theme-day-22 { background: linear-gradient(135deg, #ff9966, #ff5e62, #ff9966); }
        .theme-day-23 { background: linear-gradient(135deg, #7f00ff, #e100ff, #7f00ff); }
        .theme-day-24 { background: linear-gradient(135deg, #396afc, #2948ff, #396afc); }
        .theme-day-25 { background: linear-gradient(135deg, #f12711, #f5af19, #f12711); }
        .theme-day-26 { background: linear-gradient(135deg, #659999, #f4791f, #659999); }
        .theme-day-27 { background: linear-gradient(135deg, #dd5e89, #f7bb97, #dd5e89); }
        .theme-day-28 { background: linear-gradient(135deg, #8e9eab, #eef2f3, #8e9eab); }
        .theme-day-29 { background: linear-gradient(135deg, #da4453, #89216b, #da4453); }
        .theme-day-30 { background: linear-gradient(135deg, #4da0b0, #d39d38, #4da0b0); }
        .theme-day-31 { background: linear-gradient(135deg, #ff0099, #493240, #ff0099); }
        
        /* Special Day Theme */
        .theme-special {
            background: linear-gradient(135deg, 
                #ff0000, #ff8000, #ffff00, #00ff00, 
                #00ffff, #0000ff, #8000ff, #ff00ff);
            background-size: 400% 400%;
            animation: rainbow 15s ease infinite;
        }
        
        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Location Insights Section */
        .location-insights {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px;
            margin: 30px auto;
            max-width: 800px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            animation: slideUp 1.8s ease;
        }
        
        .insights-title {
            font-size: 2rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .insights-content {
            font-size: 1.2rem;
            line-height: 1.6;
            text-align: center;
        }
        
        .special-day-highlight {
            background: rgba(255, 215, 0, 0.2);
            border-left: 4px solid gold;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
        }
        
        /* Notification Button */
        .notification-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin: 20px auto;
            transition: all 0.3s ease;
        }
        
        .notification-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }
        
        .notification-btn.enabled {
            background: rgba(46, 204, 113, 0.3);
            border-color: rgba(46, 204, 113, 0.5);
        }
        
        /* Daily Progress */
        .progress-section {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            border-radius: 5px;
            transition: width 1s ease;
        }
        
        /* Weather Info */
        .weather-info {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            margin: 10px;
        }
        
        /* Add to existing responsive styles */
        @media (max-width: 768px) {
            .insights-title {
                font-size: 1.5rem;
            }
            
            .insights-content {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="particles" id="particles-js" aria-hidden="true"></div>
        
        <main class="main-content" role="main">
            <header class="greeting-text">
                <h1 class="text-animation" id="daily-greeting">Happy New Month!</h1>
                <p class="subtitle" id="daily-date"></p>
                <div class="weather-info" id="weather-info">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="location-text">Loading location...</span>
                </div>
            </header>
            
            <section class="countdown-section" aria-label="Countdown to end of month">
                <div class="countdown-item">
                    <span class="countdown-value" id="days">30</span>
                    <span class="countdown-label">Days</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-value" id="hours">24</span>
                    <span class="countdown-label">Hours</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-value" id="minutes">60</span>
                    <span class="countdown-label">Minutes</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-value" id="seconds">60</span>
                    <span class="countdown-label">Seconds</span>
                </div>
            </section>
            
            <section class="progress-section" aria-label="Month progress">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Month Progress</span>
                    <span id="progress-percentage">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
            </section>
            
            <section class="location-insights" aria-labelledby="insights-heading">
                <h2 class="insights-title" id="insights-heading">
                    <i class="fas fa-lightbulb" aria-hidden="true"></i>
                    Today's Insights
                </h2>
                <div class="insights-content" id="daily-insights">
                    Loading today's insights based on your location...
                </div>
                <div class="special-day-highlight" id="special-day-info" style="display: none;"></div>
            </section>
            
            <section class="quote-section" aria-labelledby="quote-text">
                <i class="fas fa-quote-left quote-icon left" aria-hidden="true"></i>
                <i class="fas fa-quote-right quote-icon right" aria-hidden="true"></i>
                <p class="quote-text" id="quote-text">Loading today's quote...</p>
                <p class="quote-author" id="quote-author"></p>
            </section>
            
            <section class="prayer-section" aria-labelledby="prayer-heading">
                <h2 class="prayer-title" id="prayer-heading">
                    <i class="fas fa-hands-praying" aria-hidden="true"></i>
                    Today's Prayer
                </h2>
                <p class="prayer-text" id="daily-prayer">
                    Loading today's prayer...
                </p>
            </section>
            
            <div style="text-align: center;">
                <button class="notification-btn" id="notification-toggle">
                    <i class="fas fa-bell"></i>
                    <span id="notification-text">Enable Daily Notifications</span>
                </button>
            </div>
            
            <section class="calendar" aria-label="Calendar for current month">
                <div class="month-indicator">
                    <div class="month-name" id="current-month"></div>
                    <div class="year" id="current-year"></div>
                </div>
                
                <div class="calendar-grid">
                    <!-- Calendar days will be generated by JavaScript -->
                </div>
            </section>
            
            <div class="celebration-elements" aria-hidden="true">
                <!-- Confetti elements remain -->
                <div class="confetti"></div>
                <div class="confetti"></div>
                <div class="confetti"></div>
                <div class="confetti"></div>
                <div class="confetti"></div>
                <div class="confetti"></div>
                <div class="confetti"></div>
                <div class="confetti"></div>
            </div>
        </main>
        
        <div class="floating-elements" aria-hidden="true">
            <div class="floating-element">‚ú®</div>
            <div class="floating-element">üéâ</div>
            <div class="floating-element">üåü</div>
            <div class="floating-element">üéä</div>
            <div class="floating-element">üôè</div>
            <div class="floating-element">‚ù§Ô∏è</div>
        </div>
        
        <footer class="footer">
            <p>Daily blessings for a wonderful month ahead! üåü</p>
            <p style="font-size: 0.8rem; margin-top: 10px;">Theme changes daily ‚Ä¢ Refreshes automatically at midnight</p>
        </footer>
    </div>
    
    <script>
        // Daily Data
        const dailyData = {
            quotes: [
                {text: "The beginning is the most important part of the work.", author: "Plato"},
                {text: "Every new day is a new opportunity to write a beautiful chapter in your life story.", author: "Unknown"},
                {text: "Your life does not get better by chance, it gets better by change.", author: "Jim Rohn"},
                {text: "The secret to getting ahead is getting started.", author: "Mark Twain"},
                {text: "What you get by achieving your goals is not as important as what you become.", author: "Zig Ziglar"},
                {text: "Today is a blank canvas - paint it with vibrant colors of joy, love, and success.", author: "Unknown"},
                {text: "Don't count the days, make the days count.", author: "Muhammad Ali"},
                {text: "The future depends on what you do today.", author: "Mahatma Gandhi"},
                {text: "Each day comes bearing its own gifts. Untie the ribbons.", author: "Ruth Ann Schabacker"},
                {text: "Today is the first day of the rest of your life.", author: "Charles Dederich"},
                {text: "Write it on your heart that every day is the best day in the year.", author: "Ralph Waldo Emerson"},
                {text: "Every day may not be good, but there is something good in every day.", author: "Alice Morse Earle"},
                {text: "The sun is a daily reminder that we too can rise again from the darkness.", author: "S. Ajna"},
                {text: "Today is a gift. That's why it's called the present.", author: "Unknown"},
                {text: "Wake up with determination. Go to bed with satisfaction.", author: "Unknown"},
                {text: "Your time is limited, don't waste it living someone else's life.", author: "Steve Jobs"},
                {text: "The only way to do great work is to love what you do.", author: "Steve Jobs"},
                {text: "Believe you can and you're halfway there.", author: "Theodore Roosevelt"},
                {text: "It always seems impossible until it's done.", author: "Nelson Mandela"},
                {text: "Don't watch the clock; do what it does. Keep going.", author: "Sam Levenson"},
                {text: "The best way to predict the future is to create it.", author: "Peter Drucker"},
                {text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill"},
                {text: "You are never too old to set another goal or to dream a new dream.", author: "C.S. Lewis"},
                {text: "The only limit to our realization of tomorrow will be our doubts of today.", author: "Franklin D. Roosevelt"},
                {text: "Life is 10% what happens to you and 90% how you react to it.", author: "Charles R. Swindoll"},
                {text: "Keep your face always toward the sunshine‚Äîand shadows will fall behind you.", author: "Walt Whitman"},
                {text: "The purpose of our lives is to be happy.", author: "Dalai Lama"},
                {text: "Get busy living or get busy dying.", author: "Stephen King"},
                {text: "You have within you right now, everything you need to deal with whatever the world can throw at you.", author: "Brian Tracy"},
                {text: "Life is what happens to you while you're busy making other plans.", author: "John Lennon"},
                {text: "In the middle of every difficulty lies opportunity.", author: "Albert Einstein"}
            ],
            
            prayers: [
                "Dear Lord, thank You for this new day. Guide my steps, fill my heart with gratitude, and help me to see the blessings in each moment. Grant me wisdom in my decisions, strength in challenges, and a spirit of kindness toward others. May today bring growth, joy, and peace to my life and to those around me. Amen.",
                "Heavenly Father, as I begin this day, I ask for Your guidance and protection. Help me to focus on what truly matters and to use my time wisely. Fill me with Your peace that surpasses all understanding. May I be a light to others today. Amen.",
                "Lord, thank You for the gift of this day. Help me to start fresh, leaving yesterday's worries behind. Give me the courage to face challenges and the wisdom to make good choices. May Your love surround me throughout this day. Amen.",
                "God of new beginnings, I thank You for this fresh start. Help me to embrace today with hope and optimism. Guide my thoughts, words, and actions so they may reflect Your love and grace. Amen.",
                "Dear God, as the sun rises on this new day, I ask for Your blessing. Help me to be productive, kind, and patient. May I find joy in simple moments and strength in difficult ones. Watch over my loved ones today. Amen.",
                "Lord Jesus, I commit this day to You. Help me to live intentionally and purposefully. May I see opportunities to help others and grow in my faith. Thank You for Your constant presence in my life. Amen.",
                "Heavenly Father, grant me serenity to accept what I cannot change, courage to change what I can, and wisdom to know the difference. Help me to make the most of this day You've given me. Amen.",
                "God of all creation, thank You for the beauty of this new day. Open my eyes to see the wonders around me. Help me to be mindful, present, and grateful for each moment. Amen.",
                "Lord, as I begin this day, I ask for Your protection and guidance. Help me to be a positive influence in the world. May my actions today bring glory to Your name. Amen.",
                "Dear God, thank You for another day of life. Help me to use it wisely and well. Give me strength when I am weak, hope when I am discouraged, and love when I feel alone. Amen.",
                "Heavenly Father, I surrender this day to You. Guide my path, guard my heart, and give me discernment in all decisions. May Your will be done in my life today. Amen.",
                "Lord, fill this day with Your presence. Help me to walk in faith, not fear. May I trust in Your timing and purpose for my life. Bless the work of my hands today. Amen.",
                "God of mercy, thank You for Your forgiveness and new beginnings. Help me to extend that same grace to others today. May I be quick to forgive and slow to anger. Amen.",
                "Dear Lord, as I face this day, I ask for Your strength. Help me to overcome obstacles and to persevere through challenges. May I grow stronger in faith today. Amen.",
                "Heavenly Father, thank You for the opportunities this day brings. Help me to recognize them and to act with courage and conviction. May I make a positive difference today. Amen.",
                "Lord Jesus, be with me throughout this day. Help me to remember that I am never alone. May I feel Your presence in every situation I face. Amen.",
                "God of peace, calm any anxiety in my heart as I begin this day. Help me to trust in Your provision and timing. May Your peace guard my heart and mind. Amen.",
                "Dear Lord, thank You for the gift of today. Help me to use it to grow closer to You and to serve others with love and compassion. Amen.",
                "Heavenly Father, guide my thoughts and words today. Help me to speak with kindness and to listen with empathy. May my communication reflect Your love. Amen.",
                "Lord, as I step into this day, I ask for Your wisdom. Help me to make decisions that honor You and benefit others. May I be a good steward of my time and resources. Amen.",
                "God of hope, fill me with optimism as I begin this day. Help me to see possibilities where others see problems. May I be a source of encouragement to those around me. Amen.",
                "Dear Lord, thank You for Your faithfulness that is new every morning. Help me to be faithful in small things today. May I honor You in all I do. Amen.",
                "Heavenly Father, protect me from negativity and discouragement today. Help me to focus on what is true, noble, right, pure, lovely, and admirable. Amen.",
                "Lord Jesus, help me to live today with purpose and passion. May I not just exist, but truly live each moment to the fullest for Your glory. Amen.",
                "God of strength, empower me to face whatever this day brings. Help me to remember that I can do all things through Christ who strengthens me. Amen.",
                "Dear Lord, thank You for the promise of Your presence today. Help me to walk in confidence, knowing You are with me every step of the way. Amen.",
                "Heavenly Father, help me to be patient today - with myself, with others, and with circumstances beyond my control. May Your peace rule in my heart. Amen.",
                "Lord, give me eyes to see the needs around me today. Help me to be Your hands and feet in this world. May I serve others with humility and love. Amen.",
                "God of all comfort, help me to be a source of comfort to those who are hurting today. May Your love flow through me to touch others' lives. Amen.",
                "Dear Lord, as this day ends, I thank You for Your faithfulness. Help me to rest in Your peace and to wake tomorrow ready to serve You again. Amen.",
                "Heavenly Father, thank You for the gift of this month. Help me to make each day count for eternity. May I live with purpose, passion, and peace. Amen."
            ],
            
            greetings: [
                "Happy New Month! May it be filled with blessings",
                "Welcome to a beautiful new month",
                "A fresh start, a new beginning",
                "New month, new opportunities",
                "May this month bring you joy and success",
                "A brand new month to chase your dreams",
                "Welcome to another month of possibilities",
                "New month, new goals, new achievements",
                "May this month be your best yet",
                "A new chapter begins today"
            ]
        };

        // Special Days Database (can be expanded)
        const specialDays = {
            '01-01': {
                title: "üéâ Happy New Year!",
                message: "Welcome to a brand new year filled with possibilities! May this year bring you joy, success, and fulfillment in all your endeavors.",
                type: "global"
            },
            '01-15': {
                title: "üåü Mid-Month Celebration",
                message: "You've made it halfway through the month! Keep up the great work and finish strong.",
                type: "monthly"
            },
            '12-25': {
                title: "üéÑ Merry Christmas!",
                message: "Wishing you a Christmas filled with joy, peace, and love. May the spirit of the season be with you.",
                type: "global"
            },
            '02-14': {
                title: "‚ù§Ô∏è Valentine's Day",
                message: "Wishing you a day filled with love and appreciation for those who matter most.",
                type: "global"
            },
            '10-31': {
                title: "üéÉ Halloween",
                message: "Have a spooktacular day! Stay safe and enjoy the festivities.",
                type: "global"
            },
            '07-04': {
                title: "üá∫üá∏ Independence Day (US)",
                message: "Celebrating freedom and independence. Have a wonderful day!",
                type: "regional"
            }
        };

        // Month names for calendar
        const monthNames = [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];

        // Day names for calendar
        const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const dayOfMonth = now.getDate();
            const month = now.getMonth();
            const year = now.getFullYear();
            const dayOfYear = Math.floor((now - new Date(year, 0, 0)) / 1000 / 60 / 60 / 24);
            
            // Set daily theme
            setDailyTheme(dayOfMonth);
            
            // Set date display
            document.getElementById('daily-date').textContent = 
                `${monthNames[month]} ${dayOfMonth}, ${year}`;
            
            // Set greeting based on day
            const greetingIndex = dayOfMonth % dailyData.greetings.length;
            document.getElementById('daily-greeting').textContent = 
                dailyData.greetings[greetingIndex];
            
            // Generate calendar
            generateCalendar(month, year);
            
            // Set daily quote
            setDailyQuote(dayOfYear);
            
            // Set daily prayer
            setDailyPrayer(dayOfMonth);
            
            // Set month progress
            updateMonthProgress(dayOfMonth, month, year);
            
            // Initialize countdown
            initializeCountdown();
            
            // Get location and insights
            getLocationAndInsights(dayOfMonth, month + 1);
            
            // Setup notifications
            setupNotifications();
            
            // Create particles
            createParticles();
            
            // Check for special day
            checkSpecialDay(dayOfMonth, month + 1);
            
            // Schedule daily refresh at midnight
            scheduleMidnightRefresh();
        });

        // Set daily theme color
        function setDailyTheme(day) {
            const themeClass = `theme-day-${Math.min(day, 31)}`;
            document.body.classList.add(themeClass);
            
            // Check if it's a special day for rainbow theme
            if (day === 1 || day === 15 || day === 31) {
                document.body.classList.add('theme-special');
            }
        }

        // Set daily quote
        function setDailyQuote(dayOfYear) {
            const quoteIndex = dayOfYear % dailyData.quotes.length;
            const todayQuote = dailyData.quotes[quoteIndex];
            
            document.getElementById('quote-text').textContent = todayQuote.text;
            document.getElementById('quote-author').textContent = `- ${todayQuote.author}`;
            
            // Store today's quote index
            localStorage.setItem('lastQuoteIndex', quoteIndex);
            localStorage.setItem('lastQuoteDate', new Date().toDateString());
        }

        // Set daily prayer
        function setDailyPrayer(day) {
            const prayerIndex = (day - 1) % dailyData.prayers.length;
            document.getElementById('daily-prayer').textContent = dailyData.prayers[prayerIndex];
            
            // Store today's prayer index
            localStorage.setItem('lastPrayerIndex', prayerIndex);
            localStorage.setItem('lastPrayerDate', new Date().toDateString());
        }

        // Update month progress
        function updateMonthProgress(day, month, year) {
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const progress = (day / daysInMonth) * 100;
            
            document.getElementById('progress-percentage').textContent = 
                `${Math.round(progress)}%`;
            document.getElementById('progress-fill').style.width = `${progress}%`;
        }

        // Get location and insights
        function getLocationAndInsights(day, month) {
            const insightsElement = document.getElementById('daily-insights');
            const locationElement = document.getElementById('location-text');
            
            // Default insights based on day of month
            const dailyInsights = [
                "Begin with enthusiasm and set clear intentions for the month ahead.",
                "Focus on building good habits that will last throughout the month.",
                "Take time to appreciate the small victories and blessings.",
                "Reach out to someone who might need encouragement today.",
                "Reflect on your progress and adjust your goals if needed.",
                "Practice gratitude for what you have while working toward what you want.",
                "Find balance between work and rest for sustainable productivity.",
                "Learn something new today - growth happens one day at a time.",
                "Share kindness with strangers - small acts make big differences.",
                "Review your goals and celebrate how far you've come.",
                "Mid-month check-in: Are you on track with your intentions?",
                "Take a moment to appreciate your own strength and resilience.",
                "Connect with nature today, even if it's just noticing the sky.",
                "Practice mindfulness - be fully present in today's activities.",
                "Halfway point! Re-energize and push toward month-end goals.",
                "Help someone without expecting anything in return.",
                "Declutter something in your physical or digital space.",
                "Express appreciation to those who support you.",
                "Try a new approach to a recurring challenge.",
                "Focus on solutions rather than problems today.",
                "The final stretch begins - finish the month strong!",
                "What lessons has this month taught you so far?",
                "Prepare for a productive end to the month.",
                "Celebrate your progress, no matter how small.",
                "Review what's working and what needs adjustment.",
                "Begin planning for the month ahead.",
                "Tie up loose ends and complete pending tasks.",
                "Reflect on your achievements this month.",
                "Express gratitude for the month's experiences.",
                "Prepare for a fresh start tomorrow.",
                "Month-end review: What will you carry forward?"
            ];
            
            const todayInsight = dailyInsights[Math.min(day - 1, 30)];
            insightsElement.textContent = todayInsight;
            
            // Try to get actual location
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        getCityFromCoords(position.coords.latitude, position.coords.longitude);
                    },
                    function(error) {
                        // Use default if location denied
                        locationElement.textContent = "Global Blessings";
                        updateLocationInsights("global");
                    }
                );
            } else {
                locationElement.textContent = "Global Blessings";
                updateLocationInsights("global");
            }
        }

        // Get city from coordinates
        async function getCityFromCoords(lat, lon) {
            try {
                // Using OpenStreetMap Nominatim (free, no API key needed)
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&zoom=10`
                );
                
                if (response.ok) {
                    const data = await response.json();
                    const city = data.address.city || data.address.town || 
                                data.address.village || data.address.county || 
                                data.address.state || "Your Location";
                    
                    document.getElementById('location-text').textContent = `Blessings from ${city}`;
                    updateLocationInsights(data.address.country_code || "global");
                }
            } catch (error) {
                document.getElementById('location-text').textContent = "Global Blessings";
                updateLocationInsights("global");
            }
        }

        // Update location-based insights
        function updateLocationInsights(countryCode) {
            const now = new Date();
            const insightsElement = document.getElementById('daily-insights');
            let additionalInsight = "";
            
            // Add location-specific insights
            switch(countryCode.toUpperCase()) {
                case 'US':
                    additionalInsight = " In the US, remember to balance ambition with self-care.";
                    break;
                case 'GB':
                    additionalInsight = " In the UK, embrace the changing seasons as opportunities for growth.";
                    break;
                case 'NG':
                    additionalInsight = " In Nigeria, let community and resilience guide your day.";
                    break;
                case 'IN':
                    additionalInsight = " In India, find harmony between tradition and progress.";
                    break;
                case 'BR':
                    additionalInsight = " In Brazil, let joy and passion fuel your endeavors.";
                    break;
                default:
                    additionalInsight = " Wherever you are, may your day be filled with purpose and peace.";
            }
            
            // Add time-based insight
            const hour = now.getHours();
            if (hour < 12) {
                additionalInsight += " Make the most of this morning's fresh energy!";
            } else if (hour < 17) {
                additionalInsight += " Use this afternoon's momentum to advance your goals!";
            } else {
                additionalInsight += " Take time this evening to rest and reflect!";
            }
            
            insightsElement.textContent += additionalInsight;
        }

        // Check for special days
        function checkSpecialDay(day, month) {
            const dayStr = day.toString().padStart(2, '0');
            const monthStr = month.toString().padStart(2, '0');
            const dateKey = `${monthStr}-${dayStr}`;
            
            if (specialDays[dateKey]) {
                const specialDay = specialDays[dateKey];
                const specialElement = document.getElementById('special-day-info');
                
                specialElement.innerHTML = `
                    <strong>${specialDay.title}</strong><br>
                    ${specialDay.message}
                `;
                specialElement.style.display = 'block';
                
                // Add celebration effect for special days
                addExtraCelebration();
            }
        }

        // Add extra celebration for special days
        function addExtraCelebration() {
            const celebration = document.querySelector('.celebration-elements');
            for (let i = 0; i < 8; i++) {
                const extraConfetti = document.createElement('div');
                extraConfetti.className = 'confetti';
                extraConfetti.style.left = `${Math.random() * 100}%`;
                extraConfetti.style.animationDelay = `${Math.random() * 2}s`;
                celebration.appendChild(extraConfetti);
            }
        }

        // Setup notifications
        function setupNotifications() {
            const toggleBtn = document.getElementById('notification-toggle');
            const notificationText = document.getElementById('notification-text');
            
            // Check notification permission
            if (!('Notification' in window)) {
                toggleBtn.style.display = 'none';
                return;
            }
            
            // Load notification preference
            const notificationsEnabled = localStorage.getItem('notificationsEnabled') === 'true';
            
            if (notificationsEnabled) {
                toggleBtn.classList.add('enabled');
                notificationText.textContent = 'Daily Notifications Enabled';
                requestNotificationPermission(true);
            }
            
            // Toggle notifications
            toggleBtn.addEventListener('click', function() {
                if (Notification.permission === 'denied') {
                    alert('Please enable notifications in your browser settings.');
                    return;
                }
                
                if (Notification.permission === 'granted') {
                    const currentlyEnabled = toggleBtn.classList.contains('enabled');
                    
                    if (currentlyEnabled) {
                        // Disable notifications
                        toggleBtn.classList.remove('enabled');
                        notificationText.textContent = 'Enable Daily Notifications';
                        localStorage.setItem('notificationsEnabled', 'false');
                    } else {
                        // Enable notifications
                        toggleBtn.classList.add('enabled');
                        notificationText.textContent = 'Daily Notifications Enabled';
                        localStorage.setItem('notificationsEnabled', 'true');
                        scheduleDailyNotification();
                    }
                } else {
                    // Request permission
                    requestNotificationPermission(false);
                }
            });
            
            // Schedule daily notification if enabled
            if (notificationsEnabled) {
                scheduleDailyNotification();
            }
        }

        // Request notification permission
        function requestNotificationPermission(alreadyGranted) {
            if (!alreadyGranted) {
                Notification.requestPermission().then(function(permission) {
                    if (permission === 'granted') {
                        document.getElementById('notification-toggle').classList.add('enabled');
                        document.getElementById('notification-text').textContent = 
                            'Daily Notifications Enabled';
                        localStorage.setItem('notificationsEnabled', 'true');
                        scheduleDailyNotification();
                        
                        // Show immediate notification
                        showNotification("Daily blessings enabled!", 
                            "You'll receive daily inspiration at 9 AM local time.");
                    }
                });
            }
        }

        // Schedule daily notification
        function scheduleDailyNotification() {
            if (!('Notification' in window) || Notification.permission !== 'granted') {
                return;
            }
            
            // Clear any existing notifications
            if (window.notificationInterval) {
                clearInterval(window.notificationInterval);
            }
            
            // Check if it's time for today's notification (9 AM)
            const now = new Date();
            const today9AM = new Date();
            today9AM.setHours(9, 0, 0, 0);
            
            let timeUntil9AM = today9AM - now;
            
            // If it's already past 9 AM, schedule for tomorrow
            if (timeUntil9AM < 0) {
                timeUntil9AM += 24 * 60 * 60 * 1000; // Add 24 hours
            }
            
            // Schedule the notification
            setTimeout(function() {
                showDailyNotification();
                // Then schedule every 24 hours
                window.notificationInterval = setInterval(showDailyNotification, 24 * 60 * 60 * 1000);
            }, timeUntil9AM);
        }

        // Show daily notification
        function showDailyNotification() {
            if (Notification.permission !== 'granted') return;
            
            const now = new Date();
            const dayOfYear = Math.floor((now - new Date(now.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
            const quoteIndex = dayOfYear % dailyData.quotes.length;
            const prayerIndex = (now.getDate() - 1) % dailyData.prayers.length;
            
            const notification = new Notification("üåÖ Daily Blessings", {
                body: `${dailyData.quotes[quoteIndex].text}\n\nTap for today's prayer.`,
                icon: 'https://cdn-icons-png.flaticon.com/512/3114/3114886.png',
                tag: 'daily-blessing',
                requireInteraction: false
            });
            
            notification.onclick = function() {
                window.focus();
                document.getElementById('prayer-section').scrollIntoView({behavior: 'smooth'});
            };
        }

        // Show one-time notification
        function showNotification(title, message) {
            if (Notification.permission === 'granted') {
                new Notification(title, {
                    body: message,
                    icon: 'https://cdn-icons-png.flaticon.com/512/3114/3114886.png'
                });
            }
        }

        // Schedule midnight refresh
        function scheduleMidnightRefresh() {
            const now = new Date();
            const tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
            const timeUntilMidnight = tomorrow - now;
            
            setTimeout(function() {
                location.reload();
            }, timeUntilMidnight + 1000); // Add 1 second to ensure it's past midnight
        }

        // Generate calendar (existing function, keep as is)
        function generateCalendar(month, year) {
            const calendarGrid = document.querySelector('.calendar-grid');
            calendarGrid.innerHTML = '';
            
            // Add day headers
            dayNames.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.classList.add('day-header');
                dayElement.textContent = day;
                calendarGrid.appendChild(dayElement);
            });
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.classList.add('calendar-day', 'empty');
                calendarGrid.appendChild(emptyDay);
            }
            
            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.classList.add('calendar-day');
                dayElement.textContent = day;
                
                // Highlight today
                if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                    dayElement.classList.add('today');
                }
                
                calendarGrid.appendChild(dayElement);
            }
            
            // Set month and year display
            document.getElementById('current-month').textContent = monthNames[month];
            document.getElementById('current-year').textContent = year;
        }

        // Initialize countdown (existing function, keep as is)
        function initializeCountdown() {
            function updateCountdown() {
                const now = new Date();
                const currentMonth = now.getMonth();
                const currentYear = now.getFullYear();
                
                // Get last day of current month
                const lastDay = new Date(currentYear, currentMonth + 1, 0);
                lastDay.setHours(23, 59, 59, 999);
                
                const timeRemaining = lastDay - now;
                
                if (timeRemaining >= 0) {
                    const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);
                    
                    document.getElementById('days').textContent = String(days).padStart(2, '0');
                    document.getElementById('hours').textContent = String(hours).padStart(2, '0');
                    document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
                    document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
                }
            }
            
            updateCountdown();
            setInterval(updateCountdown, 1000);
        }

        // Create particles (existing function, keep as is)
        function createParticles() {
            const particlesContainer = document.getElementById('particles-js');
            if (!particlesContainer) return;

            const particleCount = Math.max(10, Math.min(40, Math.floor(window.innerWidth / 30)));

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');

                const size = Math.random() * 5 + 2;
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                const delay = Math.random() * 10;
                const duration = Math.random() * 20 + 10;
                const tx = Math.random() * 200 - 100;
                const ty = Math.random() * 200 - 100;

                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}%`;
                particle.style.top = `${posY}%`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                particle.style.setProperty('--tx', `${tx}px`);
                particle.style.setProperty('--ty', `${ty}px`);

                particlesContainer.appendChild(particle);
            }
        }
    </script>
</body>
</html>